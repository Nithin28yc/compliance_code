***********
Building query to fetch cluster details
***********
Cloning terraform repository
***********
Cloning into '/provision/terraform-module'... out: err: Cloning into '/provision/terraform-module'... cloned successfully
***********
Installing pre-requisites
***********
***********
Updating variables.tf
***********
updated variables successfully
***********
***********
[0m[1mInitializing modules...[0m - cluster in cluster - eip in eip - gateways in gateways - iam_role in iam_role - ig in ig - kms in kms - s3 in s3 - security_groups in security_groups - subnet in subnet - vpc in vpc [0m[1mInitializing the backend...[0m [0m[1mInitializing provider plugins...[0m - Finding hashicorp/aws versions matching "3.27.0"... - Installing hashicorp/aws v3.27.0... - Installed hashicorp/aws v3.27.0 (self-signed, key ID [0m[1m34365D9472D7468F[0m[0m) Partner and community providers are signed by their developers. If you'd like to know more about provider signing, you can read about it here: https://www.terraform.io/docs/plugins/signing.html [0m[1m[32mTerraform has been successfully initialized![0m[32m[0m [0m[32m You may now begin working with Terraform. Try running "terraform plan" to see any changes that are required for your infrastructure. All Terraform commands should now work. If you ever set or change modules or backend configuration for Terraform, rerun this command to reinitialize your working directory. If you forget, other commands will detect it and remind you to do so if necessary.[0m
***********
Executing Terraform plan
***********
[0m[1mRefreshing Terraform state in-memory prior to plan...[0m The refreshed state will be used to calculate this plan, but will not be persisted to local or remote state storage. [0m [0m[1mdata.aws_availability_zones.available: Refreshing state...[0m [0m[1mmodule.kms.data.aws_caller_identity.current: Refreshing state...[0m ------------------------------------------------------------------------ An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.cluster.aws_eks_cluster.eks_cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eks_cluster" "eks_cluster" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcertificate_authority[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcreated_at[0m[0m = (known after apply) [32m+[0m [0m[1m[0mendpoint[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0midentity[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "cluster-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mplatform_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrole_arn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mstatus[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } [32m+[0m [0m[1m[0mversion[0m[0m = "1.18" [32m+[0m [0mkubernetes_network_config { [32m+[0m [0m[1m[0mservice_ipv4_cidr[0m[0m = (known after apply) } [32m+[0m [0mvpc_config { [32m+[0m [0m[1m[0mcluster_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mendpoint_private_access[0m[0m = true [32m+[0m [0m[1m[0mendpoint_public_access[0m[0m = true [32m+[0m [0m[1m[0mpublic_access_cidrs[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0msecurity_group_ids[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_ids[0m[0m = (known after apply) [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } } [1m # module.cluster.aws_eks_node_group.eks_cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eks_node_group" "eks_cluster" { [32m+[0m [0m[1m[0mami_type[0m[0m = "AL2_x86_64" [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcapacity_type[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcluster_name[0m[0m = "cluster-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mdisk_size[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance_types[0m[0m = [ [32m+[0m [0m"t2.xlarge", ] [32m+[0m [0m[1m[0mnode_group_name[0m[0m = "np-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mnode_role_arn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrelease_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mresources[0m[0m = (known after apply) [32m+[0m [0m[1m[0mstatus[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_ids[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } [32m+[0m [0m[1m[0mversion[0m[0m = (known after apply) [32m+[0m [0mlaunch_template { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "lc-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mversion[0m[0m = (known after apply) } [32m+[0m [0mscaling_config { [32m+[0m [0m[1m[0mdesired_size[0m[0m = 1 [32m+[0m [0m[1m[0mmax_size[0m[0m = 10 [32m+[0m [0m[1m[0mmin_size[0m[0m = 1 } } [1m # module.cluster.aws_launch_template.eks_cluster_launch[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_launch_template" "eks_cluster_launch" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlatest_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "lc-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mvpc_security_group_ids[0m[0m = (known after apply) [32m+[0m [0mmetadata_options { [32m+[0m [0m[1m[0mhttp_endpoint[0m[0m = (known after apply) [32m+[0m [0m[1m[0mhttp_put_response_hop_limit[0m[0m = (known after apply) [32m+[0m [0m[1m[0mhttp_tokens[0m[0m = (known after apply) } [32m+[0m [0mtag_specifications { [32m+[0m [0m[1m[0mresource_type[0m[0m = "instance" [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "node-437254db9f29fc1da5d80ad788e1b6a3-terraform-tf-eks" [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } } } [1m # module.eip.aws_eip.nat_gateway_eip1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eip" "nat_gateway_eip1" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0massociation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcarrier_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_owned_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdomain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_border_group[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ipv4_pool[0m[0m = (known after apply) [32m+[0m [0m[1m[0mvpc[0m[0m = true } [1m # module.eip.aws_eip.nat_gateway_eip2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eip" "nat_gateway_eip2" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0massociation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcarrier_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_owned_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdomain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_border_group[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ipv4_pool[0m[0m = (known after apply) [32m+[0m [0m[1m[0mvpc[0m[0m = true } [1m # module.gateways.aws_nat_gateway.nat_gateway_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_nat_gateway" "nat_gateway_1" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway1" } } [1m # module.gateways.aws_nat_gateway.nat_gateway_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_nat_gateway" "nat_gateway_2" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway2" } } [1m # module.gateways.aws_route_table.rt_private1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_private1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = "" [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = (known after apply) [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table.rt_private2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_private2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = "" [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = (known after apply) [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table.rt_public[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_public" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = (known after apply) [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = "" [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-internet_gateway" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table_association.rtb_private_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_private_1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table_association.rtb_private_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_private_2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table_association.rtb_public_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_public_1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) } [1m # module.gateways.aws_route_table_association.rtb_public_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_public_2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_instance_profile.node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_instance_profile" "node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-instance-profile" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role.iam-eks-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "iam-eks-master" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "eks.amazonaws.com" } }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role.iam-eks-node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "iam-eks-node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "ec2.amazonaws.com" } }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSClusterPolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-cluster-AmazonEKSClusterPolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSClusterPolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSServicePolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-cluster-AmazonEKSServicePolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSServicePolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEC2ContainerRegistryReadOnly[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEC2ContainerRegistryReadOnly" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKSWorkerNodePolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEKSWorkerNodePolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKS_CNI_Policy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEKS_CNI_Policy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.policy-autoscaler[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "policy-autoscaler" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AutoScalingFullAccess" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.ig.aws_internet_gateway.internet_gateway[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_internet_gateway" "internet_gateway" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-internet_gateway" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.kms.aws_kms_key.kms_key[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_kms_key" "kms_key" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_master_key_spec[0m[0m = "SYMMETRIC_DEFAULT" [32m+[0m [0m[1m[0mdescription[0m[0m = "Key to Encrypt Clove AMI" [32m+[0m [0m[1m[0menable_key_rotation[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mis_enabled[0m[0m = true [32m+[0m [0m[1m[0mkey_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mkey_usage[0m[0m = "ENCRYPT_DECRYPT" [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mId = "key-consolepolicy-3" [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "kms:*" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "arn:aws:iam::355243123163:root" } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Enable IAM User Permissions" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Create*", [32m+[0m [0m"kms:Describe*", [32m+[0m [0m"kms:Enable*", [32m+[0m [0m"kms:List*", [32m+[0m [0m"kms:Put*", [32m+[0m [0m"kms:Update*", [32m+[0m [0m"kms:Revoke*", [32m+[0m [0m"kms:Disable*", [32m+[0m [0m"kms:Get*", [32m+[0m [0m"kms:Delete*", [32m+[0m [0m"kms:TagResource", [32m+[0m [0m"kms:UntagResource", [32m+[0m [0m"kms:ScheduleKeyDeletion", [32m+[0m [0m"kms:CancelKeyDeletion", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "arn:aws:iam::355243123163:user/TestTeamUser" } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow access for Key Administrators" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Encrypt", [32m+[0m [0m"kms:Decrypt", [32m+[0m [0m"kms:ReEncrypt*", [32m+[0m [0m"kms:GenerateDataKey*", [32m+[0m [0m"kms:DescribeKey", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = [ [32m+[0m [0m"arn:aws:iam::355243123163:user/TestTeamUser", [32m+[0m [0m"arn:aws:iam::355243123163:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling", ] } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow use of the key" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:CreateGrant", [32m+[0m [0m"kms:ListGrants", [32m+[0m [0m"kms:RevokeGrant", ] [32m+[0m [0mCondition = { [32m+[0m [0mBool = { [32m+[0m [0mkms:GrantIsForAWSResource = "true" } } [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = [ [32m+[0m [0m"arn:aws:iam::355243123163:user/TestTeamUser", [32m+[0m [0m"arn:aws:iam::355243123163:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling", ] } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow attachment of persistent resources" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Encrypt*", [32m+[0m [0m"kms:Decrypt*", [32m+[0m [0m"kms:ReEncrypt*", [32m+[0m [0m"kms:GenerateDataKey*", [32m+[0m [0m"kms:Describe*", ] [32m+[0m [0mCondition = { [32m+[0m [0mArnLike = { [32m+[0m [0mkms:EncryptionContext:aws:logs:arn = "arn:aws:logs:eu-west-3:355243123163:*" } } [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "logs.eu-west-3.amazonaws.com" } [32m+[0m [0mResource = "*" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) } [1m # module.s3.aws_s3_bucket.heptioark_s3_bucket[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_s3_bucket" "heptioark_s3_bucket" { [32m+[0m [0m[1m[0macceleration_status[0m[0m = (known after apply) [32m+[0m [0m[1m[0macl[0m[0m = "private" [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mbucket[0m[0m = "heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops" [32m+[0m [0m[1m[0mbucket_domain_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mbucket_regional_domain_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_destroy[0m[0m = true [32m+[0m [0m[1m[0mhosted_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mId = "heptioarkS3SecureTransportPolicy" [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "s3:*" [32m+[0m [0mCondition = { [32m+[0m [0mBool = { [32m+[0m [0maws:SecureTransport = "false" } } [32m+[0m [0mEffect = "Deny" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "*" } [32m+[0m [0mResource = [ [32m+[0m [0m"arn:aws:s3:::heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops", [32m+[0m [0m"arn:aws:s3:::heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops/*", ] [32m+[0m [0mSid = "heptioark-ForceSSLOnlyAccess" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mregion[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrequest_payer[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3_eu-west-3_bucket" [32m+[0m [0m"customer" = "437254db9f29fc1da5d80ad788e1b6a3" } [32m+[0m [0m[1m[0mwebsite_domain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mwebsite_endpoint[0m[0m = (known after apply) [32m+[0m [0mserver_side_encryption_configuration { [32m+[0m [0mrule { [32m+[0m [0mapply_server_side_encryption_by_default { [32m+[0m [0m[1m[0mkms_master_key_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msse_algorithm[0m[0m = "aws:kms" } } } [32m+[0m [0mversioning { [32m+[0m [0m[1m[0menabled[0m[0m = true [32m+[0m [0m[1m[0mmfa_delete[0m[0m = false } } [1m # module.security_groups.aws_security_group.sg-eks-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group" "sg-eks-master" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdescription[0m[0m = "Cluster communication with worker nodes" [32m+[0m [0m[1m[0megress[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 443 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 443 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 80 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 80 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"10.0.0.0/16", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 0 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "-1" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 0 }, ] [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mingress[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" [32m+[0m [0m[1m[0mname_prefix[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrevoke_rules_on_delete[0m[0m = false [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-terraform-eks" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.security_groups.aws_security_group.sg-eks-node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group" "sg-eks-node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdescription[0m[0m = "Security group for all nodes in the cluster" [32m+[0m [0m[1m[0megress[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 443 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 443 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 80 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 80 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"10.0.0.0/16", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 0 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "-1" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 0 }, ] [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mingress[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0mname_prefix[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrevoke_rules_on_delete[0m[0m = false [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-terraform-eks" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.security_groups.aws_security_group_rule.sg-eks-cluster-ingress-node-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-cluster-ingress-node-https" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow pods to communicate with the cluster API Server" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-cluster" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow worker Kubelets and pods to receive communication from the cluster control plane" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 1025 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 65535 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-master" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow cluster control to receive communication from the worker Kubelets" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-self[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-self" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow nodes to communicate with each other" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 0 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "-1" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 65535 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.tf-eks-master-ingress-workstation-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "tf-eks-master-ingress-workstation-https" { [32m+[0m [0m[1m[0mcidr_blocks[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow workstation to communicate with the cluster API Server." [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.tf-eks-node-ingress-workstation-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "tf-eks-node-ingress-workstation-https" { [32m+[0m [0m[1m[0mcidr_blocks[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow workstation to communicate with the Kubernetes nodes directly." [32m+[0m [0m[1m[0mfrom_port[0m[0m = 22 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 22 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.subnet.aws_cloudwatch_log_group.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_cloudwatch_log_group" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mkms_key_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mretention_in_days[0m[0m = 0 } [1m # module.subnet.aws_flow_log.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_flow_log" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0miam_role_arn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_destination[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_destination_type[0m[0m = "cloud-watch-logs" [32m+[0m [0m[1m[0mlog_format[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_group_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_aggregation_interval[0m[0m = 600 [32m+[0m [0m[1m[0mtraffic_type[0m[0m = "ALL" [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.subnet.aws_iam_role.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "vpc-flow-logs.amazonaws.com" } [32m+[0m [0mSid = "" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.subnet.aws_iam_role_policy.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy" "clove_flowlogs" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"logs:CreateLogGroup", [32m+[0m [0m"logs:CreateLogStream", [32m+[0m [0m"logs:PutLogEvents", [32m+[0m [0m"logs:DescribeLogGroups", [32m+[0m [0m"logs:DescribeLogStreams", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mResource = "*" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mrole[0m[0m = (known after apply) } [1m # module.subnet.aws_subnet.subnet_private1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_private1" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3a" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.64.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-private_subnet_1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.subnet.aws_subnet.subnet_private2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_private2" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3b" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.80.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-private_subnet_2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.subnet.aws_subnet.subnet_public1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_public1" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3a" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.96.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-public_subnet_1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.subnet.aws_subnet.subnet_public2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_public2" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3b" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.112.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-public_subnet_2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } [1m # module.vpc.aws_vpc.vpc[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_vpc" "vpc" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_generated_ipv6_cidr_block[0m[0m = false [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.0.0/16" [32m+[0m [0m[1m[0mdefault_network_acl_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_route_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdhcp_options_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_classiclink[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_classiclink_dns_support[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_dns_hostnames[0m[0m = true [32m+[0m [0m[1m[0menable_dns_support[0m[0m = true [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance_tenancy[0m[0m = "default" [32m+[0m [0m[1m[0mipv6_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmain_route_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-vpc" [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } } [0m[1mPlan:[0m 43 to add, 0 to change, 0 to destroy.[0m ------------------------------------------------------------------------ Note: You didn't specify an "-out" parameter to save this plan, so Terraform can't guarantee that exactly these actions will be performed if "terraform apply" is subsequently run.
***********
Executing Terraform apply module vpc
***********
An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.vpc.aws_vpc.vpc[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_vpc" "vpc" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_generated_ipv6_cidr_block[0m[0m = false [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.0.0/16" [32m+[0m [0m[1m[0mdefault_network_acl_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_route_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdhcp_options_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_classiclink[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_classiclink_dns_support[0m[0m = (known after apply) [32m+[0m [0m[1m[0menable_dns_hostnames[0m[0m = true [32m+[0m [0m[1m[0menable_dns_support[0m[0m = true [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance_tenancy[0m[0m = "default" [32m+[0m [0m[1m[0mipv6_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmain_route_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-vpc" [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } } [0m[1mPlan:[0m 1 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.vpc.aws_vpc.vpc: Creating...[0m[0m [0m[1mmodule.vpc.aws_vpc.vpc: Creation complete after 5s [id=vpc-0e40436493a38f916][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 1 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module kms
***********
[0m[1mmodule.kms.data.aws_caller_identity.current: Refreshing state...[0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.kms.aws_kms_key.kms_key[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_kms_key" "kms_key" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_master_key_spec[0m[0m = "SYMMETRIC_DEFAULT" [32m+[0m [0m[1m[0mdescription[0m[0m = "Key to Encrypt Clove AMI" [32m+[0m [0m[1m[0menable_key_rotation[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mis_enabled[0m[0m = true [32m+[0m [0m[1m[0mkey_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mkey_usage[0m[0m = "ENCRYPT_DECRYPT" [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mId = "key-consolepolicy-3" [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "kms:*" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "arn:aws:iam::355243123163:root" } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Enable IAM User Permissions" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Create*", [32m+[0m [0m"kms:Describe*", [32m+[0m [0m"kms:Enable*", [32m+[0m [0m"kms:List*", [32m+[0m [0m"kms:Put*", [32m+[0m [0m"kms:Update*", [32m+[0m [0m"kms:Revoke*", [32m+[0m [0m"kms:Disable*", [32m+[0m [0m"kms:Get*", [32m+[0m [0m"kms:Delete*", [32m+[0m [0m"kms:TagResource", [32m+[0m [0m"kms:UntagResource", [32m+[0m [0m"kms:ScheduleKeyDeletion", [32m+[0m [0m"kms:CancelKeyDeletion", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "arn:aws:iam::355243123163:user/TestTeamUser" } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow access for Key Administrators" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Encrypt", [32m+[0m [0m"kms:Decrypt", [32m+[0m [0m"kms:ReEncrypt*", [32m+[0m [0m"kms:GenerateDataKey*", [32m+[0m [0m"kms:DescribeKey", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = [ [32m+[0m [0m"arn:aws:iam::355243123163:user/TestTeamUser", [32m+[0m [0m"arn:aws:iam::355243123163:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling", ] } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow use of the key" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:CreateGrant", [32m+[0m [0m"kms:ListGrants", [32m+[0m [0m"kms:RevokeGrant", ] [32m+[0m [0mCondition = { [32m+[0m [0mBool = { [32m+[0m [0mkms:GrantIsForAWSResource = "true" } } [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = [ [32m+[0m [0m"arn:aws:iam::355243123163:user/TestTeamUser", [32m+[0m [0m"arn:aws:iam::355243123163:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling", ] } [32m+[0m [0mResource = "*" [32m+[0m [0mSid = "Allow attachment of persistent resources" }, [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"kms:Encrypt*", [32m+[0m [0m"kms:Decrypt*", [32m+[0m [0m"kms:ReEncrypt*", [32m+[0m [0m"kms:GenerateDataKey*", [32m+[0m [0m"kms:Describe*", ] [32m+[0m [0mCondition = { [32m+[0m [0mArnLike = { [32m+[0m [0mkms:EncryptionContext:aws:logs:arn = "arn:aws:logs:eu-west-3:355243123163:*" } } [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "logs.eu-west-3.amazonaws.com" } [32m+[0m [0mResource = "*" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) } [0m[1mPlan:[0m 1 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.kms.aws_kms_key.kms_key: Creating...[0m[0m [0m[1mmodule.kms.aws_kms_key.kms_key: Creation complete after 2s [id=fe98a407-28e7-4c36-86e6-345f49d6cec9][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 1 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module subnet
***********
[0m[1mdata.aws_availability_zones.available: Refreshing state...[0m [0m[1mmodule.kms.data.aws_caller_identity.current: Refreshing state... [id=355243123163][0m [0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m [0m[1mmodule.kms.aws_kms_key.kms_key: Refreshing state... [id=fe98a407-28e7-4c36-86e6-345f49d6cec9][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.subnet.aws_cloudwatch_log_group.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_cloudwatch_log_group" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mkms_key_id[0m[0m = "arn:aws:kms:eu-west-3:355243123163:key/fe98a407-28e7-4c36-86e6-345f49d6cec9" [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mretention_in_days[0m[0m = 0 } [1m # module.subnet.aws_flow_log.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_flow_log" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0miam_role_arn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_destination[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_destination_type[0m[0m = "cloud-watch-logs" [32m+[0m [0m[1m[0mlog_format[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlog_group_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_aggregation_interval[0m[0m = 600 [32m+[0m [0m[1m[0mtraffic_type[0m[0m = "ALL" [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.subnet.aws_iam_role.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "clove_flowlogs" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "vpc-flow-logs.amazonaws.com" } [32m+[0m [0mSid = "" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.subnet.aws_iam_role_policy.clove_flowlogs[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy" "clove_flowlogs" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs" [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = [ [32m+[0m [0m"logs:CreateLogGroup", [32m+[0m [0m"logs:CreateLogStream", [32m+[0m [0m"logs:PutLogEvents", [32m+[0m [0m"logs:DescribeLogGroups", [32m+[0m [0m"logs:DescribeLogStreams", ] [32m+[0m [0mEffect = "Allow" [32m+[0m [0mResource = "*" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mrole[0m[0m = (known after apply) } [1m # module.subnet.aws_subnet.subnet_private1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_private1" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3a" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.64.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-private_subnet_1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.subnet.aws_subnet.subnet_private2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_private2" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3b" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.80.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-private_subnet_2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.subnet.aws_subnet.subnet_public1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_public1" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3a" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.96.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-public_subnet_1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.subnet.aws_subnet.subnet_public2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_subnet" "subnet_public2" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false [32m+[0m [0m[1m[0mavailability_zone[0m[0m = "eu-west-3b" [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcidr_block[0m[0m = "10.0.112.0/20" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m = false [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-public_subnet_2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [0m[1mPlan:[0m 8 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.subnet.aws_iam_role.clove_flowlogs: Creating...[0m[0m [0m[1mmodule.subnet.aws_cloudwatch_log_group.clove_flowlogs: Creating...[0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_private2: Creating...[0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_public1: Creating...[0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_private1: Creating...[0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_public2: Creating...[0m[0m [0m[1mmodule.subnet.aws_iam_role.clove_flowlogs: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m[0m [0m[1mmodule.subnet.aws_iam_role_policy.clove_flowlogs: Creating...[0m[0m [0m[1mmodule.subnet.aws_iam_role_policy.clove_flowlogs: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs:437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m[0m [0m[1mmodule.subnet.aws_cloudwatch_log_group.clove_flowlogs: Creation complete after 1s [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m[0m [0m[1mmodule.subnet.aws_flow_log.clove_flowlogs: Creating...[0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_public2: Creation complete after 1s [id=subnet-0402d307112fa4110][0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_public1: Creation complete after 1s [id=subnet-0c79c9a4fb7d605c7][0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_private2: Creation complete after 1s [id=subnet-075e81e9a2d1cee39][0m[0m [0m[1mmodule.subnet.aws_subnet.subnet_private1: Creation complete after 2s [id=subnet-0a8bda904300b9398][0m[0m [0m[1mmodule.subnet.aws_flow_log.clove_flowlogs: Creation complete after 1s [id=fl-036eb68540fa2067a][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 8 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module eip
***********
An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.eip.aws_eip.nat_gateway_eip1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eip" "nat_gateway_eip1" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0massociation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcarrier_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_owned_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdomain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_border_group[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ipv4_pool[0m[0m = (known after apply) [32m+[0m [0m[1m[0mvpc[0m[0m = true } [1m # module.eip.aws_eip.nat_gateway_eip2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eip" "nat_gateway_eip2" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0massociation_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcarrier_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcustomer_owned_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdomain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_border_group[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_dns[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ipv4_pool[0m[0m = (known after apply) [32m+[0m [0m[1m[0mvpc[0m[0m = true } [0m[1mPlan:[0m 2 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip1: Creating...[0m[0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip2: Creating...[0m[0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip1: Creation complete after 1s [id=eipalloc-000ea4c7e429f1aab][0m[0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip2: Creation complete after 1s [id=eipalloc-01e09327f9692b531][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 2 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module ig
***********
[0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.ig.aws_internet_gateway.internet_gateway[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_internet_gateway" "internet_gateway" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-internet_gateway" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [0m[1mPlan:[0m 1 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.ig.aws_internet_gateway.internet_gateway: Creating...[0m[0m [0m[1mmodule.ig.aws_internet_gateway.internet_gateway: Creation complete after 2s [id=igw-000e1882436acfb43][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 1 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module gateways
***********
[0m[1mdata.aws_availability_zones.available: Refreshing state... [id=eu-west-3][0m [0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip2: Refreshing state... [id=eipalloc-01e09327f9692b531][0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip1: Refreshing state... [id=eipalloc-000ea4c7e429f1aab][0m [0m[1mmodule.ig.aws_internet_gateway.internet_gateway: Refreshing state... [id=igw-000e1882436acfb43][0m [0m[1mmodule.subnet.aws_subnet.subnet_public1: Refreshing state... [id=subnet-0c79c9a4fb7d605c7][0m [0m[1mmodule.subnet.aws_subnet.subnet_public2: Refreshing state... [id=subnet-0402d307112fa4110][0m [0m[1mmodule.subnet.aws_subnet.subnet_private1: Refreshing state... [id=subnet-0a8bda904300b9398][0m [0m[1mmodule.subnet.aws_subnet.subnet_private2: Refreshing state... [id=subnet-075e81e9a2d1cee39][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.gateways.aws_nat_gateway.nat_gateway_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_nat_gateway" "nat_gateway_1" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = "eipalloc-000ea4c7e429f1aab" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-0c79c9a4fb7d605c7" [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway1" } } [1m # module.gateways.aws_nat_gateway.nat_gateway_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_nat_gateway" "nat_gateway_2" { [32m+[0m [0m[1m[0mallocation_id[0m[0m = "eipalloc-01e09327f9692b531" [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mnetwork_interface_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprivate_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpublic_ip[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-0402d307112fa4110" [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway2" } } [1m # module.gateways.aws_route_table.rt_private1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_private1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = "" [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = (known after apply) [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway1" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.gateways.aws_route_table.rt_private2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_private2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = "" [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = (known after apply) [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-nat_gateway2" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.gateways.aws_route_table.rt_public[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table" "rt_public" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_block = "0.0.0.0/0" [32m+[0m [0megress_only_gateway_id = "" [32m+[0m [0mgateway_id = "igw-000e1882436acfb43" [32m+[0m [0minstance_id = "" [32m+[0m [0mipv6_cidr_block = "" [32m+[0m [0mlocal_gateway_id = "" [32m+[0m [0mnat_gateway_id = "" [32m+[0m [0mnetwork_interface_id = "" [32m+[0m [0mtransit_gateway_id = "" [32m+[0m [0mvpc_endpoint_id = "" [32m+[0m [0mvpc_peering_connection_id = "" }, ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-internet_gateway" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.gateways.aws_route_table_association.rtb_private_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_private_1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-0a8bda904300b9398" } [1m # module.gateways.aws_route_table_association.rtb_private_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_private_2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-075e81e9a2d1cee39" } [1m # module.gateways.aws_route_table_association.rtb_public_1[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_public_1" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-0c79c9a4fb7d605c7" } [1m # module.gateways.aws_route_table_association.rtb_public_2[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_route_table_association" "rtb_public_2" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_id[0m[0m = "subnet-0402d307112fa4110" } [0m[1mPlan:[0m 9 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Creating...[0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table.rt_public: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table.rt_public: Creation complete after 2s [id=rtb-0c7cfebe068261985][0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_1: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_2: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_2: Creation complete after 0s [id=rtbassoc-0d65bb1db26a26511][0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_1: Creation complete after 0s [id=rtbassoc-05771ef2ad8891138][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [10s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [10s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [20s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [20s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [30s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [30s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [40s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [40s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [50s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [50s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [1m0s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [1m0s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [1m10s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [1m10s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Still creating... [1m20s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [1m20s elapsed][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Creation complete after 1m29s [id=nat-0434dd30dd893bf57][0m[0m [0m[1mmodule.gateways.aws_route_table.rt_private2: Creating...[0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Still creating... [1m30s elapsed][0m[0m [0m[1mmodule.gateways.aws_route_table.rt_private2: Creation complete after 2s [id=rtb-0b1470e0ea086af3d][0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_2: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_2: Creation complete after 0s [id=rtbassoc-0cce0a893ce35427c][0m[0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Creation complete after 1m39s [id=nat-0efa564b55e661de4][0m[0m [0m[1mmodule.gateways.aws_route_table.rt_private1: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table.rt_private1: Creation complete after 2s [id=rtb-04bc193287a5d17cf][0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_1: Creating...[0m[0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_1: Creation complete after 1s [id=rtbassoc-0e52696a0acce915f][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 9 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module security_groups
***********
[0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.security_groups.aws_security_group.sg-eks-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group" "sg-eks-master" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdescription[0m[0m = "Cluster communication with worker nodes" [32m+[0m [0m[1m[0megress[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 443 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 443 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 80 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 80 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"10.0.0.0/16", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 0 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "-1" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 0 }, ] [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mingress[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" [32m+[0m [0m[1m[0mname_prefix[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrevoke_rules_on_delete[0m[0m = false [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-terraform-eks" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.security_groups.aws_security_group.sg-eks-node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group" "sg-eks-node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdescription[0m[0m = "Security group for all nodes in the cluster" [32m+[0m [0m[1m[0megress[0m[0m = [ [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 443 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 443 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"0.0.0.0/0", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 80 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "tcp" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 80 }, [32m+[0m [0m{ [32m+[0m [0mcidr_blocks = [ [32m+[0m [0m"10.0.0.0/16", ] [32m+[0m [0mdescription = "" [32m+[0m [0mfrom_port = 0 [32m+[0m [0mipv6_cidr_blocks = [] [32m+[0m [0mprefix_list_ids = [] [32m+[0m [0mprotocol = "-1" [32m+[0m [0msecurity_groups = [] [32m+[0m [0mself = false [32m+[0m [0mto_port = 0 }, ] [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mingress[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0mname_prefix[0m[0m = (known after apply) [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrevoke_rules_on_delete[0m[0m = false [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3-terraform-eks" } [32m+[0m [0m[1m[0mvpc_id[0m[0m = "vpc-0e40436493a38f916" } [1m # module.security_groups.aws_security_group_rule.sg-eks-cluster-ingress-node-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-cluster-ingress-node-https" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow pods to communicate with the cluster API Server" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-cluster" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow worker Kubelets and pods to receive communication from the cluster control plane" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 1025 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 65535 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-master" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow cluster control to receive communication from the worker Kubelets" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.sg-eks-node-ingress-self[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "sg-eks-node-ingress-self" { [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow nodes to communicate with each other" [32m+[0m [0m[1m[0mfrom_port[0m[0m = 0 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "-1" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 65535 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.tf-eks-master-ingress-workstation-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "tf-eks-master-ingress-workstation-https" { [32m+[0m [0m[1m[0mcidr_blocks[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow workstation to communicate with the cluster API Server." [32m+[0m [0m[1m[0mfrom_port[0m[0m = 443 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 443 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [1m # module.security_groups.aws_security_group_rule.tf-eks-node-ingress-workstation-https[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_security_group_rule" "tf-eks-node-ingress-workstation-https" { [32m+[0m [0m[1m[0mcidr_blocks[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0mdescription[0m[0m = "Allow workstation to communicate with the Kubernetes nodes directly." [32m+[0m [0m[1m[0mfrom_port[0m[0m = 22 [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mprotocol[0m[0m = "tcp" [32m+[0m [0m[1m[0msecurity_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mself[0m[0m = false [32m+[0m [0m[1m[0msource_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mto_port[0m[0m = 22 [32m+[0m [0m[1m[0mtype[0m[0m = "ingress" } [0m[1mPlan:[0m 8 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-node: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-master: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-node: Creation complete after 3s [id=sg-09035e7fd8149a020][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-self: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-node-ingress-workstation-https: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-master: Creation complete after 3s [id=sg-0c5f98fde24bacb80][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-cluster: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-master: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-master-ingress-workstation-https: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-cluster-ingress-node-https: Creating...[0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-self: Creation complete after 1s [id=sgrule-3026029736][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-master-ingress-workstation-https: Creation complete after 1s [id=sgrule-3204582978][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-node-ingress-workstation-https: Creation complete after 2s [id=sgrule-632302377][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-master: Creation complete after 2s [id=sgrule-3782700034][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-cluster: Creation complete after 4s [id=sgrule-2373725820][0m[0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-cluster-ingress-node-https: Creation complete after 5s [id=sgrule-4132710213][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 8 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module iam_role
***********
An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.iam_role.aws_iam_instance_profile.node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_instance_profile" "node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-instance-profile" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role.iam-eks-master[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "iam-eks-master" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "eks.amazonaws.com" } }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role.iam-eks-node[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role" "iam-eks-node" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0massume_role_policy[0m[0m = jsonencode( { [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "sts:AssumeRole" [32m+[0m [0mEffect = "Allow" [32m+[0m [0mPrincipal = { [32m+[0m [0mService = "ec2.amazonaws.com" } }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mmax_session_duration[0m[0m = 3600 [32m+[0m [0m[1m[0mname[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0mpath[0m[0m = "/" [32m+[0m [0m[1m[0munique_id[0m[0m = (known after apply) } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSClusterPolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-cluster-AmazonEKSClusterPolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSClusterPolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSServicePolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-cluster-AmazonEKSServicePolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSServicePolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-cluster" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEC2ContainerRegistryReadOnly[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEC2ContainerRegistryReadOnly" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKSWorkerNodePolicy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEKSWorkerNodePolicy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKS_CNI_Policy[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "iam-eks-node-AmazonEKS_CNI_Policy" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [1m # module.iam_role.aws_iam_role_policy_attachment.policy-autoscaler[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_iam_role_policy_attachment" "policy-autoscaler" { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AutoScalingFullAccess" [32m+[0m [0m[1m[0mrole[0m[0m = "437254db9f29fc1da5d80ad788e1b6a3-node" } [0m[1mPlan:[0m 9 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-node: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-master: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-master: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-cluster][0m[0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-node: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-node][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSClusterPolicy: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSServicePolicy: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.policy-autoscaler: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKS_CNI_Policy: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKSWorkerNodePolicy: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEC2ContainerRegistryReadOnly: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_instance_profile.node: Creating...[0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSServicePolicy: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-cluster-20211122114614112300000003][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKSWorkerNodePolicy: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614112200000002][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKS_CNI_Policy: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614114900000004][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.policy-autoscaler: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614115100000005][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSClusterPolicy: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-cluster-20211122114614111900000001][0m[0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEC2ContainerRegistryReadOnly: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614120600000006][0m[0m [0m[1mmodule.iam_role.aws_iam_instance_profile.node: Creation complete after 0s [id=437254db9f29fc1da5d80ad788e1b6a3-instance-profile][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 9 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module s3
***********
[0m[1mmodule.kms.data.aws_caller_identity.current: Refreshing state... [id=355243123163][0m [0m[1mmodule.kms.aws_kms_key.kms_key: Refreshing state... [id=fe98a407-28e7-4c36-86e6-345f49d6cec9][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.s3.aws_s3_bucket.heptioark_s3_bucket[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_s3_bucket" "heptioark_s3_bucket" { [32m+[0m [0m[1m[0macceleration_status[0m[0m = (known after apply) [32m+[0m [0m[1m[0macl[0m[0m = "private" [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mbucket[0m[0m = "heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops" [32m+[0m [0m[1m[0mbucket_domain_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mbucket_regional_domain_name[0m[0m = (known after apply) [32m+[0m [0m[1m[0mforce_destroy[0m[0m = true [32m+[0m [0m[1m[0mhosted_zone_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode( { [32m+[0m [0mId = "heptioarkS3SecureTransportPolicy" [32m+[0m [0mStatement = [ [32m+[0m [0m{ [32m+[0m [0mAction = "s3:*" [32m+[0m [0mCondition = { [32m+[0m [0mBool = { [32m+[0m [0maws:SecureTransport = "false" } } [32m+[0m [0mEffect = "Deny" [32m+[0m [0mPrincipal = { [32m+[0m [0mAWS = "*" } [32m+[0m [0mResource = [ [32m+[0m [0m"arn:aws:s3:::heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops", [32m+[0m [0m"arn:aws:s3:::heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops/*", ] [32m+[0m [0mSid = "heptioark-ForceSSLOnlyAccess" }, ] [32m+[0m [0mVersion = "2012-10-17" } ) [32m+[0m [0m[1m[0mregion[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrequest_payer[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "437254db9f29fc1da5d80ad788e1b6a3_eu-west-3_bucket" [32m+[0m [0m"customer" = "437254db9f29fc1da5d80ad788e1b6a3" } [32m+[0m [0m[1m[0mwebsite_domain[0m[0m = (known after apply) [32m+[0m [0m[1m[0mwebsite_endpoint[0m[0m = (known after apply) [32m+[0m [0mserver_side_encryption_configuration { [32m+[0m [0mrule { [32m+[0m [0mapply_server_side_encryption_by_default { [32m+[0m [0m[1m[0mkms_master_key_id[0m[0m = "arn:aws:kms:eu-west-3:355243123163:key/fe98a407-28e7-4c36-86e6-345f49d6cec9" [32m+[0m [0m[1m[0msse_algorithm[0m[0m = "aws:kms" } } } [32m+[0m [0mversioning { [32m+[0m [0m[1m[0menabled[0m[0m = true [32m+[0m [0m[1m[0mmfa_delete[0m[0m = false } } [0m[1mPlan:[0m 1 to add, 0 to change, 0 to destroy.[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.s3.aws_s3_bucket.heptioark_s3_bucket: Creating...[0m[0m [0m[1mmodule.s3.aws_s3_bucket.heptioark_s3_bucket: Creation complete after 9s [id=heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 1 added, 0 changed, 0 destroyed.[0m
***********
Executing Terraform apply module cluster
***********
[0m[1mdata.aws_availability_zones.available: Refreshing state... [id=eu-west-3][0m [0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-node: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node][0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-master: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-cluster][0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-master: Refreshing state... [id=sg-0c5f98fde24bacb80][0m [0m[1mmodule.subnet.aws_subnet.subnet_private2: Refreshing state... [id=subnet-075e81e9a2d1cee39][0m [0m[1mmodule.subnet.aws_subnet.subnet_private1: Refreshing state... [id=subnet-0a8bda904300b9398][0m [0m[1mmodule.subnet.aws_subnet.subnet_public1: Refreshing state... [id=subnet-0c79c9a4fb7d605c7][0m [0m[1mmodule.subnet.aws_subnet.subnet_public2: Refreshing state... [id=subnet-0402d307112fa4110][0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-node: Refreshing state... [id=sg-09035e7fd8149a020][0m An execution plan has been generated and is shown below. Resource actions are indicated with the following symbols: [32m+[0m create [0m Terraform will perform the following actions: [1m # module.cluster.aws_eks_cluster.eks_cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eks_cluster" "eks_cluster" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcertificate_authority[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcreated_at[0m[0m = (known after apply) [32m+[0m [0m[1m[0mendpoint[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0midentity[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "cluster-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mplatform_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mrole_arn[0m[0m = "arn:aws:iam::355243123163:role/437254db9f29fc1da5d80ad788e1b6a3-cluster" [32m+[0m [0m[1m[0mstatus[0m[0m = (known after apply) [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } [32m+[0m [0m[1m[0mversion[0m[0m = "1.18" [32m+[0m [0mkubernetes_network_config { [32m+[0m [0m[1m[0mservice_ipv4_cidr[0m[0m = (known after apply) } [32m+[0m [0mvpc_config { [32m+[0m [0m[1m[0mcluster_security_group_id[0m[0m = (known after apply) [32m+[0m [0m[1m[0mendpoint_private_access[0m[0m = true [32m+[0m [0m[1m[0mendpoint_public_access[0m[0m = true [32m+[0m [0m[1m[0mpublic_access_cidrs[0m[0m = [ [32m+[0m [0m"50.16.106.134/32", [32m+[0m [0m"52.206.69.181/32", ] [32m+[0m [0m[1m[0msecurity_group_ids[0m[0m = [ [32m+[0m [0m"sg-0c5f98fde24bacb80", ] [32m+[0m [0m[1m[0msubnet_ids[0m[0m = [ [32m+[0m [0m"subnet-0402d307112fa4110", [32m+[0m [0m"subnet-075e81e9a2d1cee39", [32m+[0m [0m"subnet-0a8bda904300b9398", [32m+[0m [0m"subnet-0c79c9a4fb7d605c7", ] [32m+[0m [0m[1m[0mvpc_id[0m[0m = (known after apply) } } [1m # module.cluster.aws_eks_node_group.eks_cluster[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_eks_node_group" "eks_cluster" { [32m+[0m [0m[1m[0mami_type[0m[0m = "AL2_x86_64" [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcapacity_type[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcluster_name[0m[0m = "cluster-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mdisk_size[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0minstance_types[0m[0m = [ [32m+[0m [0m"t2.xlarge", ] [32m+[0m [0m[1m[0mnode_group_name[0m[0m = "np-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mnode_role_arn[0m[0m = "arn:aws:iam::355243123163:role/437254db9f29fc1da5d80ad788e1b6a3-node" [32m+[0m [0m[1m[0mrelease_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mresources[0m[0m = (known after apply) [32m+[0m [0m[1m[0mstatus[0m[0m = (known after apply) [32m+[0m [0m[1m[0msubnet_ids[0m[0m = [ [32m+[0m [0m"subnet-075e81e9a2d1cee39", [32m+[0m [0m"subnet-0a8bda904300b9398", ] [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } [32m+[0m [0m[1m[0mversion[0m[0m = (known after apply) [32m+[0m [0mlaunch_template { [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "lc-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mversion[0m[0m = (known after apply) } [32m+[0m [0mscaling_config { [32m+[0m [0m[1m[0mdesired_size[0m[0m = 1 [32m+[0m [0m[1m[0mmax_size[0m[0m = 10 [32m+[0m [0m[1m[0mmin_size[0m[0m = 1 } } [1m # module.cluster.aws_launch_template.eks_cluster_launch[0m will be created[0m[0m [0m [32m+[0m[0m resource "aws_launch_template" "eks_cluster_launch" { [32m+[0m [0m[1m[0marn[0m[0m = (known after apply) [32m+[0m [0m[1m[0mdefault_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mid[0m[0m = (known after apply) [32m+[0m [0m[1m[0mlatest_version[0m[0m = (known after apply) [32m+[0m [0m[1m[0mname[0m[0m = "lc-437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m[1m[0mvpc_security_group_ids[0m[0m = [ [32m+[0m [0m"sg-09035e7fd8149a020", ] [32m+[0m [0mmetadata_options { [32m+[0m [0m[1m[0mhttp_endpoint[0m[0m = (known after apply) [32m+[0m [0m[1m[0mhttp_put_response_hop_limit[0m[0m = (known after apply) [32m+[0m [0m[1m[0mhttp_tokens[0m[0m = (known after apply) } [32m+[0m [0mtag_specifications { [32m+[0m [0m[1m[0mresource_type[0m[0m = "instance" [32m+[0m [0m[1m[0mtags[0m[0m = { [32m+[0m [0m"Name" = "node-437254db9f29fc1da5d80ad788e1b6a3-terraform-tf-eks" [32m+[0m [0m"owner" = "multicloud_437254db9f29fc1da5d80ad788e1b6a3" [32m+[0m [0m"parent_cluster" = "multicloud_b721549f63fc4ceb8c15df96f572758b" [32m+[0m [0m"resource_owner" = "ekschild" } } } [0m[1mPlan:[0m 3 to add, 0 to change, 0 to destroy.[0m [0m [1mChanges to Outputs:[0m [32m+[0m [0m[1m[0mcluster_endpoint[0m[0m = (known after apply) [32m+[0m [0m[1m[0mcluster_name[0m[0m = (known after apply)[0m [33m [1m[33mWarning: [0m[0m[1mResource targeting is in effect[0m [0mYou are creating a plan with the -target option, which means that the result of this plan may not represent all of the changes requested by the current configuration. The -target option is not for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1mDo you want to perform these actions?[0m Terraform will perform the actions described above. Only 'yes' will be accepted to approve. [1mEnter a value:[0m [0m [0m[1mmodule.cluster.aws_launch_template.eks_cluster_launch: Creating...[0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Creating...[0m[0m [0m[1mmodule.cluster.aws_launch_template.eks_cluster_launch: Creation complete after 1s [id=lt-049d5b3bf9740235a][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [1m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [2m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [3m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [4m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [5m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [6m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [7m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [8m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [9m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [10m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [11m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [11m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [11m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Still creating... [11m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Creation complete after 11m39s [id=cluster-437254db9f29fc1da5d80ad788e1b6a3][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Creating...[0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [1m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [2m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [3m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m10s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m20s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m30s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m40s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [4m50s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Still creating... [5m0s elapsed][0m[0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Creation complete after 5m2s [id=cluster-437254db9f29fc1da5d80ad788e1b6a3:np-437254db9f29fc1da5d80ad788e1b6a3][0m[0m [33m [1m[33mWarning: [0m[0m[1mApplied changes may be incomplete[0m [0mThe plan was created with the -target option in effect, so some changes requested in the configuration may have been ignored and the output values may not be fully updated. Run the following command to verify that no other changes are pending: terraform plan Note that the -target option is not suitable for routine use, and is provided only for exceptional situations such as recovering from errors or mistakes, or when Terraform specifically suggests to use it as part of an error message. [0m[0m [0m[1m[32m Apply complete! Resources: 3 added, 0 changed, 0 destroyed.[0m [0m[1m[32m Outputs: cluster_endpoint = https://8F670F4B1D5BC14C0C770072E3667A6F.yl4.eu-west-3.eks.amazonaws.com cluster_name = cluster-437254db9f29fc1da5d80ad788e1b6a3[0m
***********
Executing Terraform refresh
***********
[0m[1mmodule.subnet.aws_iam_role.clove_flowlogs: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m [0m[1mmodule.kms.data.aws_caller_identity.current: Refreshing state... [id=355243123163][0m [0m[1mdata.aws_availability_zones.available: Refreshing state... [id=eu-west-3][0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip1: Refreshing state... [id=eipalloc-000ea4c7e429f1aab][0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-master: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-cluster][0m [0m[1mmodule.iam_role.aws_iam_role.iam-eks-node: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node][0m [0m[1mmodule.vpc.aws_vpc.vpc: Refreshing state... [id=vpc-0e40436493a38f916][0m [0m[1mmodule.eip.aws_eip.nat_gateway_eip2: Refreshing state... [id=eipalloc-01e09327f9692b531][0m [0m[1mmodule.kms.aws_kms_key.kms_key: Refreshing state... [id=fe98a407-28e7-4c36-86e6-345f49d6cec9][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKSWorkerNodePolicy: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614112200000002][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEKS_CNI_Policy: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614114900000004][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.policy-autoscaler: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614115100000005][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-eks-node-AmazonEC2ContainerRegistryReadOnly: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-node-20211122114614120600000006][0m [0m[1mmodule.iam_role.aws_iam_instance_profile.node: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-instance-profile][0m [0m[1mmodule.subnet.aws_iam_role_policy.clove_flowlogs: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs:437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSClusterPolicy: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-cluster-20211122114614111900000001][0m [0m[1mmodule.iam_role.aws_iam_role_policy_attachment.iam-cluster-AmazonEKSServicePolicy: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3-cluster-20211122114614112300000003][0m [0m[1mmodule.subnet.aws_cloudwatch_log_group.clove_flowlogs: Refreshing state... [id=437254db9f29fc1da5d80ad788e1b6a3.clove_flowlogs][0m [0m[1mmodule.s3.aws_s3_bucket.heptioark_s3_bucket: Refreshing state... [id=heptioark.437254db9f29fc1da5d80ad788e1b6a3.devops][0m [0m[1mmodule.subnet.aws_subnet.subnet_private1: Refreshing state... [id=subnet-0a8bda904300b9398][0m [0m[1mmodule.subnet.aws_subnet.subnet_public1: Refreshing state... [id=subnet-0c79c9a4fb7d605c7][0m [0m[1mmodule.subnet.aws_flow_log.clove_flowlogs: Refreshing state... [id=fl-036eb68540fa2067a][0m [0m[1mmodule.subnet.aws_subnet.subnet_private2: Refreshing state... [id=subnet-075e81e9a2d1cee39][0m [0m[1mmodule.subnet.aws_subnet.subnet_public2: Refreshing state... [id=subnet-0402d307112fa4110][0m [0m[1mmodule.ig.aws_internet_gateway.internet_gateway: Refreshing state... [id=igw-000e1882436acfb43][0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-master: Refreshing state... [id=sg-0c5f98fde24bacb80][0m [0m[1mmodule.security_groups.aws_security_group.sg-eks-node: Refreshing state... [id=sg-09035e7fd8149a020][0m [0m[1mmodule.gateways.aws_route_table.rt_public: Refreshing state... [id=rtb-0c7cfebe068261985][0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-master-ingress-workstation-https: Refreshing state... [id=sgrule-3204582978][0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-self: Refreshing state... [id=sgrule-3026029736][0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-cluster: Refreshing state... [id=sgrule-2373725820][0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-cluster-ingress-node-https: Refreshing state... [id=sgrule-4132710213][0m [0m[1mmodule.security_groups.aws_security_group_rule.tf-eks-node-ingress-workstation-https: Refreshing state... [id=sgrule-632302377][0m [0m[1mmodule.security_groups.aws_security_group_rule.sg-eks-node-ingress-master: Refreshing state... [id=sgrule-3782700034][0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_2: Refreshing state... [id=nat-0434dd30dd893bf57][0m [0m[1mmodule.gateways.aws_nat_gateway.nat_gateway_1: Refreshing state... [id=nat-0efa564b55e661de4][0m [0m[1mmodule.cluster.aws_launch_template.eks_cluster_launch: Refreshing state... [id=lt-049d5b3bf9740235a][0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_2: Refreshing state... [id=rtbassoc-0d65bb1db26a26511][0m [0m[1mmodule.gateways.aws_route_table_association.rtb_public_1: Refreshing state... [id=rtbassoc-05771ef2ad8891138][0m [0m[1mmodule.cluster.aws_eks_cluster.eks_cluster: Refreshing state... [id=cluster-437254db9f29fc1da5d80ad788e1b6a3][0m [0m[1mmodule.gateways.aws_route_table.rt_private2: Refreshing state... [id=rtb-0b1470e0ea086af3d][0m [0m[1mmodule.gateways.aws_route_table.rt_private1: Refreshing state... [id=rtb-04bc193287a5d17cf][0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_2: Refreshing state... [id=rtbassoc-0cce0a893ce35427c][0m [0m[1mmodule.gateways.aws_route_table_association.rtb_private_1: Refreshing state... [id=rtbassoc-0e52696a0acce915f][0m [0m[1mmodule.cluster.aws_eks_node_group.eks_cluster: Refreshing state... [id=cluster-437254db9f29fc1da5d80ad788e1b6a3:np-437254db9f29fc1da5d80ad788e1b6a3][0m [0m[1m[32m Outputs: cluster_endpoint = https://8F670F4B1D5BC14C0C770072E3667A6F.yl4.eu-west-3.eks.amazonaws.com cluster_name = cluster-437254db9f29fc1da5d80ad788e1b6a3[0m
***********
update kubeconfig
***********
Added new context arn:aws:eks:eu-west-3:355243123163:cluster/cluster-437254db9f29fc1da5d80ad788e1b6a3 to /provision/terraform-module/config
***********
## Execution rights to installScript.sh
***********
#
***********
## Creating service account and executing installation script
***********
# [INFO] Creating service account for 437254db9f29fc1da5d80ad788e1b6a3 serviceaccount/multicloud created clusterrole.rbac.authorization.k8s.io/multicloud created clusterrolebinding.rbac.authorization.k8s.io/multicloud created [INFO] Installing ArgoCD for 437254db9f29fc1da5d80ad788e1b6a3 namespace/argocd created customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created serviceaccount/argocd-application-controller created serviceaccount/argocd-dex-server created serviceaccount/argocd-redis created serviceaccount/argocd-server created role.rbac.authorization.k8s.io/argocd-application-controller created role.rbac.authorization.k8s.io/argocd-dex-server created role.rbac.authorization.k8s.io/argocd-redis created role.rbac.authorization.k8s.io/argocd-server created clusterrole.rbac.authorization.k8s.io/argocd-application-controller created clusterrole.rbac.authorization.k8s.io/argocd-server created rolebinding.rbac.authorization.k8s.io/argocd-application-controller created rolebinding.rbac.authorization.k8s.io/argocd-dex-server created rolebinding.rbac.authorization.k8s.io/argocd-redis created rolebinding.rbac.authorization.k8s.io/argocd-server created clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller created clusterrolebinding.rbac.authorization.k8s.io/argocd-server created configmap/argocd-cm created configmap/argocd-gpg-keys-cm created configmap/argocd-rbac-cm created configmap/argocd-ssh-known-hosts-cm created configmap/argocd-tls-certs-cm created secret/argocd-secret created service/argocd-dex-server created service/argocd-metrics created service/argocd-redis created service/argocd-repo-server created service/argocd-server created service/argocd-server-metrics created deployment.apps/argocd-dex-server created deployment.apps/argocd-redis created deployment.apps/argocd-repo-server created deployment.apps/argocd-server created statefulset.apps/argocd-application-controller created [INFO] Installing ArgoCD CLI for 437254db9f29fc1da5d80ad788e1b6a3 [INFO] ArgoCD CLI isntalled for 437254db9f29fc1da5d80ad788e1b6a3 ###Waiting for argocd pods to start### ###Argocd pods are running### service/argocd-server patched [INFO] Patched argoCD service as LB for 437254db9f29fc1da5d80ad788e1b6a3 [INFO] Argocd server ELB fetched for 437254db9f29fc1da5d80ad788e1b6a3 a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com:80 configmap/argocd-rbac-cm patched [INFO] ArgoCD RBAC updated for 437254db9f29fc1da5d80ad788e1b6a3 configmap/argocd-cm patched [INFO] New ArgoCD user added for 437254db9f29fc1da5d80ad788e1b6a3 [INFO] Skipping Istio installation [INFO] Downloading Velero for 437254db9f29fc1da5d80ad788e1b6a3 velero-v1.1.0-beta.2-linux-amd64/LICENSE velero-v1.1.0-beta.2-linux-amd64/examples/README.md velero-v1.1.0-beta.2-linux-amd64/examples/minio velero-v1.1.0-beta.2-linux-amd64/examples/minio/00-minio-deployment.yaml velero-v1.1.0-beta.2-linux-amd64/examples/nginx-app velero-v1.1.0-beta.2-linux-amd64/examples/nginx-app/README.md velero-v1.1.0-beta.2-linux-amd64/examples/nginx-app/base.yaml velero-v1.1.0-beta.2-linux-amd64/examples/nginx-app/with-pv.yaml velero-v1.1.0-beta.2-linux-amd64/velero [INFO] Creating credentials file for EKS-437254db9f29fc1da5d80ad788e1b6a3 [INFO] Installing velero for EKS-437254db9f29fc1da5d80ad788e1b6a3 CustomResourceDefinition/deletebackuprequests.velero.io: attempting to create resource CustomResourceDefinition/deletebackuprequests.velero.io: created CustomResourceDefinition/podvolumebackups.velero.io: attempting to create resource CustomResourceDefinition/podvolumebackups.velero.io: created CustomResourceDefinition/volumesnapshotlocations.velero.io: attempting to create resource CustomResourceDefinition/volumesnapshotlocations.velero.io: created CustomResourceDefinition/serverstatusrequests.velero.io: attempting to create resource CustomResourceDefinition/serverstatusrequests.velero.io: created CustomResourceDefinition/backups.velero.io: attempting to create resource CustomResourceDefinition/backups.velero.io: created CustomResourceDefinition/restores.velero.io: attempting to create resource CustomResourceDefinition/restores.velero.io: created CustomResourceDefinition/schedules.velero.io: attempting to create resource CustomResourceDefinition/schedules.velero.io: created CustomResourceDefinition/backupstoragelocations.velero.io: attempting to create resource CustomResourceDefinition/backupstoragelocations.velero.io: created CustomResourceDefinition/downloadrequests.velero.io: attempting to create resource CustomResourceDefinition/downloadrequests.velero.io: created CustomResourceDefinition/podvolumerestores.velero.io: attempting to create resource CustomResourceDefinition/podvolumerestores.velero.io: created CustomResourceDefinition/resticrepositories.velero.io: attempting to create resource CustomResourceDefinition/resticrepositories.velero.io: created Waiting for resources to be ready in cluster... Namespace/velero: attempting to create resource Namespace/velero: created ClusterRoleBinding/velero: attempting to create resource ClusterRoleBinding/velero: created ServiceAccount/velero: attempting to create resource ServiceAccount/velero: created Secret/cloud-credentials: attempting to create resource Secret/cloud-credentials: created BackupStorageLocation/default: attempting to create resource BackupStorageLocation/default: created VolumeSnapshotLocation/default: attempting to create resource VolumeSnapshotLocation/default: created Deployment/velero: attempting to create resource Deployment/velero: created Velero is installed! ? Use 'kubectl logs deployment/velero -n velero' to view the status. Schedule "cluster-backup" created successfully. [INFO] Ensuring ArgoCD LB is up for 437254db9f29fc1da5d80ad788e1b6a3 LB_COUNT is 0 NODE_COUNT is 1 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 0 LB_COUNT is 1 [INFO] LB is up for 437254db9f29fc1da5d80ad788e1b6a3 [INFO] Starting ArgoCD password reset for 437254db9f29fc1da5d80ad788e1b6a3 a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com:80 'admin' logged in successfully Context 'a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com:80' updated Password updated Context 'a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com:80' updated Password updated
***********
Get ServiceAccount token
***********
***********
# Fetching ArgoCD server LB IP
***********
#
***********
# Fetching ArgoCD server LB IP
***********
# a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com a0ba71b0047934aebb57dee0b185ab7e-1914062805.eu-west-3.elb.amazonaws.com
***********
Terraform output endpoint
***********
[0;33mhttps://8F670F4B1D5BC14C0C770072E3667A6F.yl4.eu-west-3.eks.amazonaws.com[0m
***********
Bringing up metrics server
***********
creating Cluster Autoscaler serviceaccount/cluster-autoscaler created clusterrole.rbac.authorization.k8s.io/cluster-autoscaler created role.rbac.authorization.k8s.io/cluster-autoscaler created clusterrolebinding.rbac.authorization.k8s.io/cluster-autoscaler created rolebinding.rbac.authorization.k8s.io/cluster-autoscaler created deployment.apps/cluster-autoscaler created Cluster-Autoscaler created creating metrics server clusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader created clusterrolebinding.rbac.authorization.k8s.io/metrics-server:system:auth-delegator created rolebinding.rbac.authorization.k8s.io/metrics-server-auth-reader created apiservice.apiregistration.k8s.io/v1beta1.metrics.k8s.io created serviceaccount/metrics-server created clusterrolebinding.rbac.authorization.k8s.io/metrics-server:system:auth-delegator configured rolebinding.rbac.authorization.k8s.io/metrics-server-auth-reader configured clusterrole.rbac.authorization.k8s.io/system:metrics-server created clusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader unchanged clusterrolebinding.rbac.authorization.k8s.io/system:metrics-server created apiservice.apiregistration.k8s.io/v1beta1.metrics.k8s.io unchanged service/metrics-server created deployment.apps/metrics-server created service/metrics-server unchanged clusterrole.rbac.authorization.k8s.io/system:metrics-server configured clusterrolebinding.rbac.authorization.k8s.io/system:metrics-server unchanged metrics server created
***********
Fetching certificate authority data
***********
***********
Update custom kubeconfig
***********
***********
Update vault
***********
Vault updated Cluster provision successfull
***********
***********
***********
***********
***********
***********
## Updating DB Status ##
***********
***********
***********
***********
***********
***********
Db status updated Generating log file